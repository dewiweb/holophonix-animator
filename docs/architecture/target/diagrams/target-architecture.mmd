---
title: Holophonix Animator Architecture
---
%%{init: {
    'theme': 'base',
    'themeVariables': {
        'primaryColor': '#4a90e2',
        'primaryTextColor': '#2A2A2A',
        'primaryBorderColor': '#2F80ED',
        'lineColor': '#666666',
        'secondaryColor': '#73C991',
        'tertiaryColor': '#F4A261'
    }
}}%%
graph TB
    %% Main Components
    UI[User Interface Layer]
    AS[Animation Service]
    MP[Main Process]
    DB[(State Storage)]
    HP[(Holophonix System)]
    
    %% UI Layer Components
    subgraph UI_Components[User Interface Components]
        UI_Motion[Motion Control Interface]
        UI_Config[Configuration Panel]
        UI_Preview[Preview Window]
        UI_Monitor[System Monitor]
    end
    
    %% Animation Service Components
    subgraph AS_Components[Animation Service Components]
        AS_Core[Animation Core Engine]
        AS_Compute[Computation Modules]
        AS_State[State Manager]
        AS_Plugin[Plugin System]
    end
    
    %% Main Process Components
    subgraph MP_Components[Main Process Components]
        MP_Bridge[Animation Bridge]
        MP_Config[Config Manager]
        MP_OSC[OSC Handler]
        MP_Diag[Diagnostics]
    end
    
    %% Connections
    UI --> MP
    MP --> AS
    MP --> HP
    AS --> DB
    MP --> DB
    
    %% UI Component Connections
    UI_Motion --> MP_Bridge
    UI_Config --> MP_Config
    UI_Preview --> MP_Bridge
    UI_Monitor --> MP_Diag
    
    %% Animation Service Connections
    MP_Bridge --> AS_Core
    AS_Core --> AS_Compute
    AS_Core --> AS_State
    AS_Core --> AS_Plugin
    
    %% OSC Communication
    subgraph "Holophonix Animator"
        UI["UI Layer<br/>(Electron Renderer)"]
        MP["Main Process<br/>(Electron Main)"]
        AB["Animation Bridge"]
        OSC["OSC Handler"]
        style UI fill:#d4e6f1,stroke:#2874a6
        style MP fill:#d4e6f1,stroke:#2874a6
        style AB fill:#d4e6f1,stroke:#2874a6
        style OSC fill:#d4e6f1,stroke:#2874a6
    end

    subgraph "External Systems"
        HS["Holophonix System"]
        style HS fill:#d5f5e3,stroke:#196f3d
    end

    UI <--> |"IPC"| MP
    MP <--> |"Commands/Events"| AB
    AB <--> |"State Updates"| OSC
    OSC <--> |"OSC Messages<br/>(UDP:4003)"| HS
    
    %% Styling
    classDef primary fill:#4a90e2,stroke:#2F80ED,stroke-width:2px,color:#FFFFFF
    classDef secondary fill:#73C991,stroke:#2A9D8F,stroke-width:1px,color:#2A2A2A
    classDef storage fill:#FFB347,stroke:#F4A261,stroke-width:1px,color:#2A2A2A
    classDef external fill:#FF7F7F,stroke:#E76F51,stroke-width:1px,color:#FFFFFF
    
    class UI,AS,MP primary
    class UI_Motion,UI_Config,UI_Preview,UI_Monitor,AS_Core,AS_Compute,AS_State,AS_Plugin,MP_Bridge,MP_Config,MP_OSC,MP_Diag secondary
    class DB storage
    class HP external

%% Notes
%% - Bilingual UI (English/French) implemented across UI components
%% - OSC communication on port 4003 (configurable)
%% - Real-time performance monitoring and diagnostics
%% - Plugin system for extensible motion patterns
%% - State persistence and recovery system
%% - Bidirectional OSC communication for sending commands and receiving status
